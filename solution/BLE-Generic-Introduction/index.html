<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://landtco.github.io/tel-mkdocs/solution/BLE-Generic-Introduction/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>BLE Generic Introduction - Telink wiki</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">
        <link href="../../css/content.css" rel="stylesheet">
        <link href="../../css/nav.css" rel="stylesheet">
        <link href="../../css/sidebar.css" rel="stylesheet">
        <link href="../../css/buttons.css" rel="stylesheet">
        <link href="../../css/card.css" rel="stylesheet">
        <link href="../../css/order.css" rel="stylesheet">
        <link href="../../css/form.css" rel="stylesheet">
        <link href="../../css/footer.css" rel="stylesheet">
        <link href="../../css/table.css" rel="stylesheet">
        <link href="../../css/links.css" rel="stylesheet">
        <link href="../../css/utilities.css" rel="stylesheet">
        <link href="../../css/mermaid.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
    <a class="navbar-brand" href="https://landtco.github.io/tel-mkdocs/"></a>

                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
    
    <!-- Main navigation -->
    <ul class="nav navbar-nav">
        
            
                
                    
                        <li class="dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Chip Family <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../chip-family/TLSR8x5x-Family/">TLSR8x5x Family</a>
</li>
                            
                                
<li >
    <a href="../../chip-family/TLSR823x-TLSR836x-Series/">TLSR823x & TLSR836x Series</a>
</li>
                            
                                
<li >
    <a href="../../chip-family/TLSR826x-Family/">TLSR826x Family</a>
</li>
                            
                                
<li >
    <a href="../../chip-family/TLSR827x-TLSR8355-Series/">TLSR827x & TLSR8355 Series</a>
</li>
                            
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../hardware/TLSR8x5x-Family-Boards/">TLRS8x5x Family Boards</a>
</li>
                            
                                
<li >
    <a href="../../hardware/TLSR823x-Family-Boards/">TLRS823x Family Boards</a>
</li>
                            
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Qualification <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../qualification/Bluetooth-Low-Energy-Equipment/">Bluetooth Low Energy Equipment</a>
</li>
                            
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown active">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Solution <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../ESL-System-Quick-Start/">ESL System Quick Start</a>
</li>
                            
                                
<li class="active">
    <a href="./">BLE Generic Introduction</a>
</li>
                            
                                
<li >
    <a href="../BLE-SIG-Mesh-Quick-Start/">BLE SIG Mesh Quick Start</a>
</li>
                            
                                
<li >
    <a href="../826x-BLE-RCU-Quick-Start/">826x BLE RCU Quick Start</a>
</li>
                            
                                
<li >
    <a href="../8258-BLE-RCU-Quick-Start/">8258 BLE RCU Quick Start</a>
</li>
                            
                                
<li >
    <a href="../BLE-Telink-Mesh-Quick-Start/">BLE Telink Mesh Quick Start</a>
</li>
                            
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../tools/BQB-Test-Guide/">BQB Test Guide</a>
</li>
                            
                                
<li >
    <a href="../../tools/EMI-Test-Guide/">EMI Test Guide</a>
</li>
                            
                                
<li >
    <a href="../../tools/Telink-IDE/">Telink IDE</a>
</li>
                            
                                
<li >
    <a href="../../tools/Burning-and-Debugging-Tool/">Burning and Debugging Tool</a>
</li>
                            
                            </ul>
                        </li>
                    
                
            
        

        

    </ul>
    



                    <ul class="nav navbar-nav navbar-right">



                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
    <div class="col-md-3 sticky-top d-none d-md-block">
        <div class="content-top">



    
    

    <nav id="telink-1"  class="nav collapse show" data-parent="#accordionExample" aria-labelledby="telink-1">
        
        

        
            
                
                

                <div class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                    <ul class="list-unstyled" data-md-scrollfix>
                        
                            <li class="md-nav__item md-nav__item--nested">
                                <a href="#navitem-1" title="Chip Family" class="b--nav-link" role="button" data-toggle="collapse" href="#navitem-1" aria-expanded="false" aria-controls="#navitem-1">
                                    Chip Family
                                </a>
                                <div id="navitem-1"  class="collapse">
                                    <nav class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                                        <ul class="list-unstyled sub-nav" data-md-scrollfix style="margin-left: 2rem;">
                                        
                                        
                                            
                                            
                                            
<li >
    <a href="../../chip-family/TLSR8x5x-Family/">TLSR8x5x Family</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../chip-family/TLSR823x-TLSR836x-Series/">TLSR823x & TLSR836x Series</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../chip-family/TLSR826x-Family/">TLSR826x Family</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../chip-family/TLSR827x-TLSR8355-Series/">TLSR827x & TLSR8355 Series</a>
</li>
                                        
                                        </ul>
                                    </nav>
                                </div>
                            </li>
                        
                    </ul>
                </div>
            
                
                

                <div class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                    <ul class="list-unstyled" data-md-scrollfix>
                        
                            <li class="md-nav__item md-nav__item--nested">
                                <a href="#navitem-2" title="Hardware" class="b--nav-link" role="button" data-toggle="collapse" href="#navitem-2" aria-expanded="false" aria-controls="#navitem-2">
                                    Hardware
                                </a>
                                <div id="navitem-2"  class="collapse">
                                    <nav class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                                        <ul class="list-unstyled sub-nav" data-md-scrollfix style="margin-left: 2rem;">
                                        
                                        
                                            
                                            
                                            
<li >
    <a href="../../hardware/TLSR8x5x-Family-Boards/">TLRS8x5x Family Boards</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../hardware/TLSR823x-Family-Boards/">TLRS823x Family Boards</a>
</li>
                                        
                                        </ul>
                                    </nav>
                                </div>
                            </li>
                        
                    </ul>
                </div>
            
                
                

                <div class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                    <ul class="list-unstyled" data-md-scrollfix>
                        
                            <li class="md-nav__item md-nav__item--nested">
                                <a href="#navitem-3" title="Qualification" class="b--nav-link" role="button" data-toggle="collapse" href="#navitem-3" aria-expanded="false" aria-controls="#navitem-3">
                                    Qualification
                                </a>
                                <div id="navitem-3"  class="collapse">
                                    <nav class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                                        <ul class="list-unstyled sub-nav" data-md-scrollfix style="margin-left: 2rem;">
                                        
                                        
                                            
                                            
                                            
<li >
    <a href="../../qualification/Bluetooth-Low-Energy-Equipment/">Bluetooth Low Energy Equipment</a>
</li>
                                        
                                        </ul>
                                    </nav>
                                </div>
                            </li>
                        
                    </ul>
                </div>
            
                
                

                <div class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                    <ul class="list-unstyled" data-md-scrollfix>
                        
                            <li class="md-nav__item md-nav__item--nested">
                                <a href="#navitem-4" title="Solution" class="b--nav-link active" role="button" data-toggle="collapse" href="#navitem-4" aria-expanded="false" aria-controls="#navitem-4">
                                    Solution
                                </a>
                                <div id="navitem-4"  class="collapse show">
                                    <nav class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                                        <ul class="list-unstyled sub-nav" data-md-scrollfix style="margin-left: 2rem;">
                                        
                                        
                                            
                                            
                                            
<li >
    <a href="../ESL-System-Quick-Start/">ESL System Quick Start</a>
</li>
                                        
                                            
                                            
                                            
<li class="active">
    <a href="./">BLE Generic Introduction</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../BLE-SIG-Mesh-Quick-Start/">BLE SIG Mesh Quick Start</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../826x-BLE-RCU-Quick-Start/">826x BLE RCU Quick Start</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../8258-BLE-RCU-Quick-Start/">8258 BLE RCU Quick Start</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../BLE-Telink-Mesh-Quick-Start/">BLE Telink Mesh Quick Start</a>
</li>
                                        
                                        </ul>
                                    </nav>
                                </div>
                            </li>
                        
                    </ul>
                </div>
            
                
                

                <div class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                    <ul class="list-unstyled" data-md-scrollfix>
                        
                            <li class="md-nav__item md-nav__item--nested">
                                <a href="#navitem-5" title="Tools" class="b--nav-link" role="button" data-toggle="collapse" href="#navitem-5" aria-expanded="false" aria-controls="#navitem-5">
                                    Tools
                                </a>
                                <div id="navitem-5"  class="collapse">
                                    <nav class="b--nav-sub" data-md-component="collapsible" data-md-level="2">
                                        <ul class="list-unstyled sub-nav" data-md-scrollfix style="margin-left: 2rem;">
                                        
                                        
                                            
                                            
                                            
<li >
    <a href="../../tools/BQB-Test-Guide/">BQB Test Guide</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../tools/EMI-Test-Guide/">EMI Test Guide</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../tools/Telink-IDE/">Telink IDE</a>
</li>
                                        
                                            
                                            
                                            
<li >
    <a href="../../tools/Burning-and-Debugging-Tool/">Burning and Debugging Tool</a>
</li>
                                        
                                        </ul>
                                    </nav>
                                </div>
                            </li>
                        
                    </ul>
                </div>
            
        

    </nav>
  </div>
    </div>
    <div class="col-md-9" role="main"><div  class="content-top">


    <div class="col-md-12">
        <h1 id="ble-generic-introduction">BLE Generic Introduction</h1>
<hr style="border-bottom:2.5px solid rgb(146, 240, 161)">

<p>826x and 825x family chipset are both SIG certified BLE device, you can build most of the BLE application on top of Telink BLE stack and SDK. In our SDK we&rsquo;ve created a feature<em>test, driver</em>test and RemoteControlUnit (RCU) to demonstrate the capability of Telink BLE STACK and on top of the hardware, you can use it as the baseline to create your own application.</p>
<h2 id="hci-testing">HCI testing</h2>
<h2 id="feature_test">Feature_test</h2>
<p>You can refer to 826x<em>feature</em>test/app<em>config.h TEST</em>XXX to understand what features demonstration we&rsquo;ve supported and you could expand your testing/feature requirement based on this.</p>
<p>Here explains some commonly used features and APIs for reference, you can always refer to <a href="http://wiki.telink-semi.cn/tools_and_sdk/BLE_SDK/826x_SDK/Handbook.zip">Developer Handbook</a> for further detail of each features and interface mentioned.</p>
<p><strong>TEST<em>ADVERTISING</em>ONLY</strong></p>
<ul>
<li>This enables the device as advertiser and sends the NON_CONNECT and INDIRECT ADV packets</li>
<li>You&rsquo;ll need to setup the advertising parameters and then enable the advertising function</li>
</ul>
<pre class="codehilite"><code>bls_ll_setAdvParam_setAdvParam(...)
bls_ll_setAdvEnable(1)</code></pre>


<p><strong>TEST<em>SCANNING</em>ONLY</strong></p>
<ul>
<li>This enables the device as scanner</li>
<li>If the print function is enabled, it prints the advertising report, otherwise i&rsquo;ll dump to - AA_advRpt[]</li>
<li>You&rsquo;ll need to setup the scanning parameters and then enable the scan function</li>
</ul>
<pre class="codehilite"><code>blc_ll_setScanParameter(...);
blc_ll_setScanEnable(...);</code></pre>


<p><strong>TEST<em>ADVERTISING</em>SCANNING<em>IN</em>CONN<em>SLAVE</em>ROLE</strong></p>
<ul>
<li>This a combination feature test that enables the fundamental Slave function and also including the Advertising/Scanning as well, you can use this as the baseline to extend your application</li>
<li>You&rsquo;ll need to setup the advertising parameters, scanning parameters and then enable the Connection Salve Role to handle the connection request and maintain the connection resource.</li>
</ul>
<pre class="codehilite"><code>bls_ll_setAdvParam(...);
bls_ll_setAdvEnable();
blc_ll_addAdvertisingInConnSlaveRole();
blc_ll_setAdvParamInConnSlaveRole(…);</code></pre>


<ul>
<li>And then you can register to handle the connection/disconnect event</li>
</ul>
<pre class="codehilite"><code>bls_app_registerEventCallback(BLT_EV_FLAG_CONNECT, &amp;task_connect);
bls_app_registerEventCallback(BLT_EV_FLAG_TERMINATE, &amp;task_terminate);</code></pre>


<h2 id="driver_test">Driver_test</h2>
<p><strong>HW_TIMER</strong></p>
<p>This demonstrates all 3 hardware timers and configure them into different timing, once the timer expired, the irq_handler() will callback your ISR function.</p>
<pre class="codehilite"><code>reg_irq_mask |= FLD_IRQ_TMR0_EN;
reg_tmr0_tick = 0; //clear counter
reg_tmr0_capt = 10 * CLOCK_SYS_CLOCK_1MS;
reg_tmr_sta = FLD_TMR_STA_TMR0; //clear irq status
reg_tmr_ctrl |= FLD_TMR0_EN;  //start timer

irq_enable();</code></pre>


<p>Below is the ISR handler sample, to recognize the timer source, and record the counter.</p>
<pre class="codehilite"><code>if(reg_tmr_sta &amp; FLD_TMR_STA_TMR0){
    reg_tmr_sta = FLD_TMR_STA_TMR0; //clear irq status
    timer0_irq_cnt ++;
    DBG_CHN0_TOGGLE;
}</code></pre>


<p>From the sample test, you can see the hardware timer configuration and how do you recognize the timer interrupt source so that you can handle it accordingly.</p>
<p><strong>GPIO_IRQ</strong></p>
<p>This demonstrates hardware gpio interrupt function. You can see the ISR callback when the interrupt criteria is met.</p>
<pre class="codehilite"><code>TBD</code></pre>


<p>Below is the ISR handler sample, to recognize the gpio interrupt source, and record the counter and toggle the GPIO so that you can probe the signal as well.</p>
<pre class="codehilite"><code>if(reg_irq_src &amp; FLD_IRQ_GPIO_EN){
    reg_irq_src = FLD_IRQ_GPIO_EN;

    gpio_irq_cnt ++;
    DBG_CHN0_TOGGLE;
    gpio_toggle(GPIO_LED1_PIN);
}</code></pre>


<p><strong>UART</strong></p>
<p>This driver test could demonstrate either the UART DMA or UART GPIO functionality depends on the flag, you can run the testing to see how do we transmit and receive the char through the UART interface.</p>
<pre class="codehilite"><code>#define UART_DMA_MODE_EN     1  // 1:dma mode, 0: not dma mode</code></pre>


<p>By default, the test is running in UART DMA mode, this configures the baudrate, tx/rx buffer, and enables the GPIO pin as UART function.</p>
<p>For Not DMA mode, it will configure the controller, but not instead of using DMA to tx/rx data, it&rsquo;ll be a polling base for each char tx/rx.</p>
<pre class="codehilite"><code>For DMA:
    CLK16M_UART115200;
    uart_RecBuffInit();
    uart_txBuffInit();
    UART_GPIO_CFG_PC2_PC3();

For Not-DMA:
    uart_Init();
    uart_notDmaModeInit();
    UART_GPIO_CFG_PC2_PC3();

irq_enable();</code></pre>


<p>And once the irq enabled, and the test main<em>loop will start sending the data and wait for receiving as well, you can refer to app</em>uart.c/app<em>uart</em>test<em>irq</em>proc() for further details.</p>
<p><strong>I2C</strong></p>
<p><strong>SPI</strong></p>
<p><strong>ADC</strong></p>
<p><strong>PWM</strong></p>
    </div>

</div></div>

        </div>

        <footer class="col-md-12">
    <div class="container">
        <div class="row">
        <div class="col-lg-6">
            <p class="b--font-seventh text-white">Copyright © 2020 Telink. All rights reserved.</p>
            <p class="b--font-seventh text-white">
                <a class="b--footer__link b--font-seventh text-white" 
                href="https://www.telink-semi.com/privacy-policy/" target="_blank" rel="noopener noreferrer">Privacy Policy
            </a>
        </p></div>
        </div>
    </div>

        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.js" defer></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
        <script src="../../js/mathjaxhelperInline.js" defer></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
